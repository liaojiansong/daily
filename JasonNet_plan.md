#  计划书
 一、完成前端代码
 
&emsp;1. **产品概况**(优先完成)
* 添加产品
* 编辑产品
* 产品秘钥
* 产品概况展示(设备数量、数据情况、触发记录)

&emsp;2. **设备管理**(最优完成)

* 添加设备(模态框：设备名称、鉴权信息、描述、数据类型)
* 编辑设备(新的页面)
* 设备列表(分页)
* 命令下发(模态框：字符串、16进制数)
* 设备详情(模态框：名称)
* 删除设备(按钮ajax删除弹出提示框)
* 触发规则(新页面)
* 数据导出(按钮的形式通过Excel)
* 设备搜索(通过设备名或id)
* 数据展示(跳转到数据管理)

&emsp;3. **数据管理**
* 数据展示（echart）
* 数据导出
* 数据分析
* 数据模板

&emsp;4. **规则引擎**
* 添加规则
* 编辑规则
* 删除规则
* 事件报警（邮件和短信）
* 联动规则

&emsp;5. **API管理**
* api列表
* 使用方式
* API开启或关闭

&emsp;6.**平台管理**

* 平台用户列表
* 用户注册
* 用户编辑(状态启用)
* 用户信息(邮箱)
* 权限管理

*单个设备采集的信息是否具有多样性?*


二、设备接入服务器
1. 接入API设计
2. 鉴权（根据传递过来的鉴权信息到数据库查询）
3. 鉴权通过放进信任白名单
4. 信任白名单为redis的集合
5. 设置有限期
6. 设备源源不断采集数据那就不停更新有效期
7. 数据先存到redis累计后再存到数据库
8. 设备状态的问题
9. 好像PHPmqtt有方法判断
10. 数据流实时展现的问题
11. 每个设备采集的数据对应一个list
12. 前端通过websocket的形式定时去这个list拿然后展示
13. 事件报警的问题
14. 设备白名单会对应一个阈值
15. 每次采集数据都会去访问这个白名单看看设备是否在白名单
16. 如果在又再看看采集的数据有没有超过这个阈值
17. 超过就拿到这个设备id和采集到的值然后调用触发方法
18. 触发方法接收一个设备id和采集的值
19. 然后方法内部通过这个id查询到关联的邮箱并把报警值通过邮件发送过去
